C51 COMPILER V9.60.0.0   KEYPAD                                                            10/11/2023 22:18:42 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE KEYPAD
OBJECT MODULE PLACED IN .\OBJ\keypad.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\UserCode\keypad.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\HardWareCode;..\H
                    -ardWareCode;..\UserCode) DEBUG OBJECTEXTEND PRINT(.\LST\keypad.lst) TABS(2) OBJECT(.\OBJ\keypad.obj)

line level    source

   1          
   2          
   3          #include ".\include\REG_MG82F6D17.H"
   4          #include ".\include\API_Macro_MG82F6D17.H"
   5          #include ".\include\Type.h"
   6          
   7          #include "keypad.h"
   8          
   9          volatile uint8_t KeyValue;
  10          volatile uint8_t KeypadState;
  11          volatile uint8_t KeyPressedValue;
  12          volatile uint8_t KeyPressTimer;
  13          volatile signed char  KeyPressCounter;
  14          volatile signed char  LongKeyPressTimer;
  15          
  16          void KeypadScan(void)
  17          {
  18   1        switch(KeypadState)
  19   1        {
  20   2          case KEYPAD_STATE_INIT: 
  21   2            KeypadState = KEYPAD_STATE_IDLE;
  22   2            break;
  23   2          
  24   2          case KEYPAD_STATE_IDLE:
  25   2            KeyPressCounter=-1;           
  26   2            LongKeyPressTimer=-1;
  27   2            KeyPressedValue = GetKeyPressed();
  28   2            if(KeyPressedValue != NULL_KEY)
  29   2            {
  30   3              KeypadState=KEYPAD_STATE_KEYDEBOUNCE;
  31   3              KeyPressTimer=KEY_DEBOUNCE_TIME;      
  32   3            }
  33   2            break;
  34   2        
  35   2        
  36   2          case KEYPAD_STATE_KEYDEBOUNCE:
  37   2            if (KeyPressTimer==0)           
  38   2            {
  39   3              if (GetKeyPressed() != KeyPressedValue)
  40   3              {
  41   4                KeyPressedValue=NULL_KEY;
  42   4                KeypadState=KEYPAD_STATE_IDLE;
  43   4                break;
  44   4              }    
  45   3               KeypadState=KEYPAD_STATE_WAITFORRELEASE;   
  46   3               KeyPressCounter=0;
  47   3               LongKeyPressTimer=0;
  48   3               
  49   3            }
  50   2            break;
  51   2        
  52   2            
  53   2            case KEYPAD_STATE_WAITFORRELEASE:
  54   2            if(LongKeyPressTimer==KEY_REPEAT_TIME)
C51 COMPILER V9.60.0.0   KEYPAD                                                            10/11/2023 22:18:42 PAGE 2   

  55   2            {
  56   3              LongKeyPressTimer=0;
  57   3              KeyPressCounter++;
  58   3              if(KeyPressCounter > 2)
  59   3              {
  60   4                if(KeyPressedValue == 7)
  61   4                {SetLedIndication(5,ON,INFINITE);}
*** WARNING C206 IN LINE 61 OF ..\UserCode\keypad.c: 'SetLedIndication': missing function-prototype
*** ERROR C267 IN LINE 61 OF ..\UserCode\keypad.c: 'SetLedIndication': requires ANSI-style prototype
*** ERROR C202 IN LINE 61 OF ..\UserCode\keypad.c: 'ON': undefined identifier
  62   4              }
  63   3            }
  64   2        
  65   2            if (GetKeyPressed() == NULL_KEY)
  66   2            {
  67   3              KeyValue = KeyPressedValue;
  68   3              if(KeyValue == 7)
  69   3              {
  70   4                if(KeyPressCounter > 2)
  71   4                KeyValue = 8; 
  72   4              }
  73   3              
  74   3               KeypadState=KEYPAD_STATE_IDLE;
  75   3               KeyPressCounter=-1;
  76   3               LongKeyPressTimer=-1;
  77   3               break;
  78   3            }     
  79   2          break;
  80   2         }
  81   1      }
  82          
  83          char GetKeyPressed(void)
  84          {
  85   1        if (!SW1) 
*** ERROR C202 IN LINE 85 OF ..\UserCode\keypad.c: 'SW1': undefined identifier
  86   1        {return KEY1;}
  87   1        
  88   1        else if (!SW2)  
*** ERROR C202 IN LINE 88 OF ..\UserCode\keypad.c: 'SW2': undefined identifier
  89   1        {return KEY2;}
  90   1        
  91   1        else if (!SW3)  
*** ERROR C202 IN LINE 91 OF ..\UserCode\keypad.c: 'SW3': undefined identifier
  92   1        {return KEY3;}
  93   1        
  94   1        else if (!SW4)  
*** ERROR C202 IN LINE 94 OF ..\UserCode\keypad.c: 'SW4': undefined identifier
  95   1        {return KEY4;}
  96   1        
  97   1        else if (!SW5)  
*** ERROR C202 IN LINE 97 OF ..\UserCode\keypad.c: 'SW5': undefined identifier
  98   1        {return KEY5;}
  99   1        
 100   1        else if (!SW6)  
*** ERROR C202 IN LINE 100 OF ..\UserCode\keypad.c: 'SW6': undefined identifier
 101   1        {return KEY6;}
 102   1        
 103   1        else if (!SW7)  
*** ERROR C202 IN LINE 103 OF ..\UserCode\keypad.c: 'SW7': undefined identifier
 104   1        {return KEY7;}
 105   1      
 106   1        else 
C51 COMPILER V9.60.0.0   KEYPAD                                                            10/11/2023 22:18:42 PAGE 3   

 107   1        {return NULL_KEY;}
 108   1      }
 109          
 110          
 111          
 112          
 113          
 114          

C51 COMPILATION COMPLETE.  1 WARNING(S),  9 ERROR(S)
